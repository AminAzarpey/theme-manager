{"version":3,"file":"core.js","sources":["../src/js/core.js"],"sourcesContent":["// src/js/core.js\r\n\r\nconst THEME_KEY = \"tm_theme\";\r\nconst PALETTE_KEY = \"tm_palette\";\r\nconst DIRECTION_KEY = \"tm_dir\";\r\n\r\nlet currentTheme = localStorage.getItem(THEME_KEY)\r\n    || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\r\nlet currentPalette = localStorage.getItem(PALETTE_KEY) || \"default\";\r\nlet currentDirection = localStorage.getItem(DIRECTION_KEY) || \"ltr\";\r\n\r\nconst themeLinkId = \"theme-css\";\r\n\r\nfunction applyCssFile() {\r\n    const fileName = `theme-${currentTheme}.${currentPalette}${currentDirection === 'rtl' ? '.rtl' : '.ltr'}.css`;\r\n    const href = `dist/${fileName}`;\r\n    const linkTag = document.getElementById(themeLinkId);\r\n    console.log(fileName)\r\n    document.body.className = `theme-${currentTheme} palette-${currentPalette}`;\r\n    document.documentElement.setAttribute(\"dir\", currentDirection);\r\n\r\n\r\n    if (linkTag) {\r\n        linkTag.setAttribute(\"href\", href);\r\n    } else {\r\n        const link = document.createElement(\"link\");\r\n        link.id = themeLinkId;\r\n        link.rel = \"stylesheet\";\r\n        link.href = href;\r\n        document.head.appendChild(link);\r\n    }\r\n}\r\n\r\nfunction setTheme(theme) {\r\n    currentTheme = theme;\r\n    localStorage.setItem(THEME_KEY, theme);\r\n    applyCssFile();\r\n}\r\n\r\nfunction setPalette(palette) {\r\n    currentPalette = palette;\r\n    localStorage.setItem(PALETTE_KEY, palette);\r\n    applyCssFile();\r\n}\r\n\r\nfunction setDirection(dir) {\r\n    currentDirection = dir;\r\n    localStorage.setItem(DIRECTION_KEY, dir);\r\n    document.documentElement.setAttribute(\"dir\", dir);\r\n    applyCssFile();\r\n}\r\n\r\nexport function initThemeSystem() {\r\n    document.documentElement.setAttribute(\"dir\", currentDirection);\r\n    applyCssFile();\r\n}\r\n\r\nexport function toggleTheme() {\r\n    setTheme(currentTheme === \"light\" ? \"dark\" : \"light\");\r\n}\r\n\r\nexport function applyPalette(palette) {\r\n    setPalette(palette);\r\n}\r\n\r\nexport function toggleDirection() {\r\n    setDirection(currentDirection === \"ltr\" ? \"rtl\" : \"ltr\");\r\n}\r\n\r\nexport function getCurrentConfig() {\r\n    return {\r\n        theme: currentTheme,\r\n        palette: currentPalette,\r\n        direction: currentDirection,\r\n    };\r\n}\r\nexport function resetThemeSystem() {\r\n    localStorage.removeItem(THEME_KEY);\r\n    localStorage.removeItem(PALETTE_KEY);\r\n    localStorage.removeItem(DIRECTION_KEY);\r\n    currentTheme = \"light\";\r\n    currentPalette = \"default\";\r\n    currentDirection = \"ltr\";\r\n    initThemeSystem();\r\n}"],"names":["THEME_KEY","PALETTE_KEY","DIRECTION_KEY","currentTheme","localStorage","getItem","window","matchMedia","matches","currentPalette","currentDirection","themeLinkId","applyCssFile","fileName","href","linkTag","document","getElementById","console","log","body","className","documentElement","setAttribute","link","createElement","id","rel","head","appendChild","initThemeSystem","palette","setItem","setPalette","theme","direction","removeItem","dir"],"mappings":"mPAEA,MAAMA,EAAY,WACZC,EAAc,aACdC,EAAgB,SAEtB,IAAIC,EAAeC,aAAaC,QAAQL,KAChCM,OAAOC,WAAW,gCAAgCC,QAAU,OAAS,SACzEC,EAAiBL,aAAaC,QAAQJ,IAAgB,UACtDS,EAAmBN,aAAaC,QAAQH,IAAkB,MAE9D,MAAMS,EAAc,YAEpB,SAASC,IACL,MAAMC,EAAW,SAASV,KAAgBM,IAAsC,QAArBC,EAA6B,OAAS,aAC3FI,EAAO,QAAQD,IACfE,EAAUC,SAASC,eAAeN,GAMxC,GALAO,QAAQC,IAAIN,GACZG,SAASI,KAAKC,UAAY,SAASlB,aAAwBM,IAC3DO,SAASM,gBAAgBC,aAAa,MAAOb,GAGzCK,EACAA,EAAQQ,aAAa,OAAQT,OAC1B,CACH,MAAMU,EAAOR,SAASS,cAAc,QACpCD,EAAKE,GAAKf,EACVa,EAAKG,IAAM,aACXH,EAAKV,KAAOA,EACZE,SAASY,KAAKC,YAAYL,EAC9B,CACJ,CAqBO,SAASM,IACZd,SAASM,gBAAgBC,aAAa,MAAOb,GAC7CE,GACJ,gBAMO,SAAsBmB,IAtB7B,SAAoBA,GAChBtB,EAAiBsB,EACjB3B,aAAa4B,QAAQ/B,EAAa8B,GAClCnB,GACJ,CAmBIqB,CAAWF,EACf,qBAMO,WACH,MAAO,CACHG,MAAO/B,EACP4B,QAAStB,EACT0B,UAAWzB,EAEnB,yCACO,WACHN,aAAagC,WAAWpC,GACxBI,aAAagC,WAAWnC,GACxBG,aAAagC,WAAWlC,GACxBC,EAAe,QACfM,EAAiB,UACjBC,EAAmB,MACnBoB,GACJ,oBAnBO,WApBP,IAAsBO,EAClB3B,EADkB2B,EAqBgB,QAArB3B,EAA6B,MAAQ,MAnBlDN,aAAa4B,QAAQ9B,EAAemC,GACpCrB,SAASM,gBAAgBC,aAAa,MAAOc,GAC7CzB,GAkBJ,gBAVO,WAxBP,IAAkBsB,EACd/B,EADc+B,EAyBY,UAAjB/B,EAA2B,OAAS,QAvB7CC,aAAa4B,QAAQhC,EAAWkC,GAChCtB,GAuBJ"}